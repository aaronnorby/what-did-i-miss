<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"> 
    <link rel="stylesheet" href="styles/styles.css">

    <title>What Did I Miss?</title>
    <!--lib scripts --> 
    <script src="bower_components/handlebars/handlebars.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/backbone/backbone.js"></script>
    <script src="bower_components/moment/moment.js"></script>

  </head>

  <body>

    <h1>What did I miss?</h1>
    
    <script id="story-template" type="text/x-handlebars-template">
      <div class="story">
        {{! triple stache won't escape html, need not to b/c npr sends html -}}
        <p><strong>The story:</strong> {{{teaser.$text}}}</p>
        <p><strong>Story Date:</strong> {{{dateformat storyDate.$text}}}</p>
        <p><strong>Show link:</strong> <a href="{{link.[0].$text}}">link</a></p>
        <p><strong>mp4 audio link:</strong> <a href="{{audio.[0].format.mp4.$text}}">link</a></p>
      </div>
    </script>

    <script id="app-template" type="text/x-handlebars-template">
      <div class="menu-bar">
        <span class="menu-item" data-showid="2">All Things Considered | </span>
        <span class="menu-item" data-showid="3">Morning Edition | </span>
        <span class="menu-item" data-showid="13">Fresh Air | </span>
        <span class="menu-item" data-showid="60">Here and Now | </span>
        <span class="menu-item" data-showid="22">Latino USA | </span>
        <span class="menu-item" data-showid="7">Weekend Edition Saturday | </span>
        <span class="menu-item" data-showid="10">Weekend Edition Sunday</span>
      </div>
      <div id="show">
      </div>
    </script>


    <script>
      var Templates = {};
      Templates.story = $('#story-template').html();
      Templates.app = $('#app-template').html();

      // moment("Thu, 24 Sep 2015 19:36:55 -0400", "ddd, D MMM YYYY HH:mm:ss Z")

      // add a Handlbars.registerHelper to format the date properly 
      Handlebars.registerHelper('dateformat', function(nprDate) {
        return moment(nprDate, "ddd, D MMM YYYY HH:mm:ss Z").format("MMMM Do, YYYY h:mm a"); 
      });
    </script>
    
    
    <!--client scripts-->
    <script src="client/AppModel.js"></script>
    <script src="client/StoryModel.js"></script>

    <script src="client/Show.js"></script>

    <script src="client/ShowView.js"></script>
    <script src="client/StoryView.js"></script>
    <script src="client/AppView.js"></script>

    <script>
      var Templates = {};
      
      //var story = new StoryModel({title: 'Fresh Air', host: 'Terry Gross'});
      
      var showCollection = new Show();

      var appModel = new AppModel({show: showCollection});
      var appView = new AppView({model: appModel});
      $('body').append(appView.render());

      //showCollection.add(story);
      // var showView = new ShowView({collection: showCollection});
      // $('body').append(showView.render());
    </script>  
  </body>
</html>
